<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metronome</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 data-i18n="title">Metronome</h1>
            <div class="header-controls">
                <label class="theme-toggle-switch" title="Theme">
                    <span class="toggle-icon left">üåô</span>
                    <input type="checkbox" id="themeToggle">
                    <span class="toggle-slider"></span>
                    <span class="toggle-icon right">‚òÄÔ∏è</span>
                </label>
                <label class="lang-toggle-switch" title="Language">
                    <span class="toggle-icon left">„ÅÇ</span>
                    <input type="checkbox" id="langToggle">
                    <span class="toggle-slider"></span>
                    <span class="toggle-icon right">A</span>
                </label>
            </div>
        </header>

        <main>
            <!-- ‰øùÂ≠ò„Åó„Åü„Éó„É™„Çª„ÉÉ„Éà„É™„Çπ„Éà -->
            <aside class="saved-presets-panel">
                <div class="saved-presets-header">
                    <h3 data-i18n="savedPresets">Saved Presets</h3>
                    <button id="savePresetBtn" class="btn-save-preset" data-i18n="savePreset">+ Save</button>
                </div>
                <div id="savedPresetsList" class="saved-presets-list">
                    <!-- „Éó„É™„Çª„ÉÉ„Éà„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                </div>
            </aside>

            <div class="main-content">
                <!-- „Éì„Ç∏„É•„Ç¢„É´Ë°®Á§∫„Ç®„É™„Ç¢ -->
                <div class="visual-display">
                    <div id="pendulum-container" class="animation-container active">
                        <div id="pendulum" class="pendulum"></div>
                    </div>
                    <div id="bpm-display" class="bpm-display">120</div>
                    <div id="beat-indicator" class="beat-indicator">1/4</div>
                </div>

                <!-- „Ç≥„É≥„Éà„É≠„Éº„É´„Éë„Éç„É´ -->
                <div class="controls">
                    <!-- ÂÜçÁîü/ÂÅúÊ≠¢„Éú„Çø„É≥ -->
                    <div class="play-controls">
                    <button id="playBtn" class="btn-primary">
                        <span id="playIcon">‚ñ∂</span>
                        <span id="playText" data-i18n="start">Start</span>
                    </button>
                        <button id="tapBtn" class="btn-secondary" data-i18n="tapTempo">Tap Tempo</button>
                    </div>

                    <!-- „ÉÜ„É≥„ÉùË®≠ÂÆö -->
                    <div class="control-group">
                        <label for="tempoSlider">
                            <span data-i18n="tempo">Tempo</span> (BPM)
                            <input type="number" id="tempoInput" min="1" max="300" value="120" step="0.1" class="tempo-input">
                        </label>
                        <input type="range" id="tempoSlider" min="1" max="300" value="120" step="1" class="slider">
                    </div>

                    <!-- ÊãçÂ≠ê„Å®„É™„Ç∫„É†„Éë„Çø„Éº„É≥ -->
                    <div class="control-group section-divider">
                        <div class="beat-rhythm-row">
                            <div class="beat-section">
                                <label data-i18n="timeSignature">Time Signature</label>
                                <select id="beatsPerBar" class="select-input">
                                    <option value="1" data-i18n="beats1">1 beat</option>
                                    <option value="2" data-i18n="beats2">2 beats</option>
                                    <option value="3" data-i18n="beats3">3 beats</option>
                                    <option value="4" selected data-i18n="beats4">4 beats</option>
                                    <option value="5" data-i18n="beats5">5 beats</option>
                                    <option value="6" data-i18n="beats6">6 beats</option>
                                    <option value="7" data-i18n="beats7">7 beats</option>
                                    <option value="8" data-i18n="beats8">8 beats</option>
                                </select>
                            </div>
                            <div class="rhythm-section">
                                <label data-i18n="rhythm">Rhythm Pattern</label>
                                <select id="rhythmPattern" class="select-input">
                                    <option value="simple" selected data-i18n="simple">Simple</option>
                                    <option value="eighth" data-i18n="eighth">Eighth Notes</option>
                                    <option value="triplet" data-i18n="triplet">Triplets</option>
                                    <option value="sixteenth" data-i18n="sixteenth">Sixteenth Notes</option>
                                    <option value="sextuplet" data-i18n="sextuplet">Sextuplets</option>
                                </select>
                            </div>
                        </div>
                        <label class="checkbox-label">
                            <input type="checkbox" id="subdivisionSound" class="checkbox-input">
                            <span data-i18n="subdivisionSound">Different sound for subdivisions</span>
                        </label>
                        <div id="subdivisionVolumeControl" class="subdivision-volume-control" style="display: none;">
                            <label for="subdivisionVolumeSlider" data-i18n="subdivisionVolume">Subdivision Volume</label>
                            <input type="range" id="subdivisionVolumeSlider" min="0" max="100" value="50" step="1" class="slider">
                            <span id="subdivisionVolumeValue">50%</span>
                        </div>
                    </div>

                <!-- Èü≥Ëâ≤Ë®≠ÂÆö -->
                <div class="control-group">
                    <label data-i18n="sound">Sound</label>
                    <select id="soundType" class="select-input">
                        <option value="click" selected data-i18n="soundClick">Click</option>
                        <option value="beep" data-i18n="soundBeep">Beep</option>
                        <option value="wood" data-i18n="soundWood">Wood</option>
                        <option value="cowbell" data-i18n="soundCowbell">Cowbell</option>
                    </select>
                </div>

                <!-- Èü≥ÈáèË®≠ÂÆö -->
                <div class="control-group">
                    <label for="volumeSlider" data-i18n="volume">Volume</label>
                    <input type="range" id="volumeSlider" min="0" max="100" value="70" step="1" class="slider">
                    <span id="volumeValue">70%</span>
                </div>

                <!-- „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Ë®≠ÂÆö -->
                <div class="control-group">
                    <label data-i18n="animation">Animation</label>
                    <select id="animationType" class="select-input">
                        <option value="pendulum" selected data-i18n="pendulum">Pendulum</option>
                        <option value="pulse" data-i18n="pulse">Pulse</option>
                        <option value="flash" data-i18n="flash">Flash</option>
                        <option value="none" data-i18n="none">None</option>
                    </select>
                </div>

                    <!-- „Éó„É™„Çª„ÉÉ„Éà -->
                    <div class="control-group">
                        <label data-i18n="presets">Presets</label>
                        <div class="preset-buttons">
                            <button class="btn-preset" data-bpm="60">Largo (60)</button>
                            <button class="btn-preset" data-bpm="80">Andante (80)</button>
                            <button class="btn-preset" data-bpm="120">Moderato (120)</button>
                            <button class="btn-preset" data-bpm="140">Allegro (140)</button>
                            <button class="btn-preset" data-bpm="180">Presto (180)</button>
                        </div>
                    </div>

                    <!-- „É™„Çª„ÉÉ„Éà„Éú„Çø„É≥ -->
                    <div class="control-group">
                        <button id="resetBtn" class="btn-reset" data-i18n="reset">Reset Settings</button>
                    </div>
                </div>
            </div>

            <!-- „Çø„Ç§„Éû„Éº„ÉªÈü≥Ê•ΩËß£Êûê„Ç´„É©„É† -->
            <div class="right-column">
                <!-- „Çø„Ç§„Éû„Éº„Éë„Éç„É´ -->
                <aside class="timer-panel">
                    <div class="timer-panel-header">
                        <h3 data-i18n="timer">Timer</h3>
                    </div>
                    <div class="timer-display-large" id="timerDisplayHeader">--:--</div>
                    <div class="timer-settings">
                        <div class="timer-inputs">
                            <div class="timer-input-group">
                                <input type="number" id="timerMinutes" min="0" max="999" value="0" class="timer-input">
                                <span data-i18n="minutes">min</span>
                            </div>
                            <div class="timer-input-group">
                                <input type="number" id="timerSeconds" min="0" max="59" value="0" class="timer-input">
                                <span data-i18n="seconds">sec</span>
                            </div>
                        </div>
                        <label class="checkbox-label">
                            <input type="checkbox" id="timerEnabled" class="checkbox-input">
                            <span data-i18n="timerEnabled">Enable timer</span>
                        </label>
                    </div>
                </aside>

                <!-- Èü≥Ê•ΩËß£Êûê„Éë„Éç„É´ -->
                <aside class="music-analysis-panel">
                    <div class="music-analysis-header">
                        <h3 data-i18n="musicAnalysis">Music Analysis</h3>
                    </div>
                    <div class="music-analysis-content">
                        <div class="file-upload-area" id="fileUploadArea">
                            <input type="file" id="audioFileInput" accept="audio/*" style="display: none;">
                            <div class="upload-placeholder" id="uploadPlaceholder">
                                <span class="upload-icon">üéµ</span>
                                <span data-i18n="uploadMusic">Upload Music</span>
                                <span class="upload-hint" data-i18n="uploadHint">Click or drag & drop</span>
                            </div>
                        </div>
                        <div id="musicInfo" class="music-info" style="display: none;">
                            <div class="music-info-item">
                                <span class="info-label" data-i18n="fileName">File:</span>
                                <span class="info-value" id="musicFileName">-</span>
                            </div>
                            <div class="music-info-item">
                                <span class="info-label" data-i18n="detectedBPM">Detected BPM:</span>
                                <span class="info-value" id="detectedBPM">-</span>
                            </div>
                            <div class="waveform-container">
                                <canvas id="waveformCanvas"></canvas>
                            </div>
                            <div class="music-controls">
                                <button id="playMusicBtn" class="btn-music-control" data-i18n="playMusic">‚ñ∂ Play</button>
                                <button id="removeMusicBtn" class="btn-music-remove" data-i18n="removeMusic">√ó Remove</button>
                            </div>
                            <div class="music-volume-control">
                                <label for="musicVolumeSlider" data-i18n="musicVolume">Music Volume</label>
                                <input type="range" id="musicVolumeSlider" min="0" max="100" value="70" step="1" class="slider">
                                <span id="musicVolumeValue">70%</span>
                            </div>
                            <div class="sync-controls">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="syncWithMetronome" class="checkbox-input">
                                    <span data-i18n="syncWithMetronome">Sync with metronome</span>
                                </label>
                            </div>
                        </div>
                        <div id="analysisProgress" class="analysis-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <span class="progress-text" id="progressText" data-i18n="analyzing">Analyzing...</span>
                        </div>
                    </div>
                </aside>
            </div>
        </main>

        <footer>
            <div class="shortcuts">
                <h3 data-i18n="shortcuts">Keyboard Shortcuts</h3>
                <ul>
                    <li><kbd>Space</kbd> - <span data-i18n="shortcutPlay">Play/Stop</span></li>
                    <li><kbd>‚Üë</kbd> / <kbd>‚Üì</kbd> - <span data-i18n="shortcutTempo">Tempo ¬±1</span></li>
                    <li><kbd>T</kbd> - <span data-i18n="shortcutTap">Tap Tempo</span></li>
                </ul>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
